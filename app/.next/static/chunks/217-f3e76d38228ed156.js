"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[217],{8217:function(e,t,n){n.d(t,{W:function(){return K},u:function(){return w}});var r=n(4051),a=n.n(r),o=n(5893),c=n(7294),s=n(3651),i=n(9823),u=n(4758),l="0.1.0",d=n(8952);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function x(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){var t=d.Z.getState(),n=t.notifications;(0,t.set)((function(t){t.notifications=x(n).concat([m({type:"success"},e)])}))}var b=JSON.parse('{"version":"0.1.0","name":"basic_6","instructions":[{"name":"initialize","accounts":[{"name":"myAccount","isMut":true,"isSigner":true},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"update","accounts":[{"name":"myAccount","isMut":true,"isSigner":false}],"args":[{"name":"data","type":"u64"}]},{"name":"increment","accounts":[{"name":"myAccount","isMut":true,"isSigner":false}],"args":[]},{"name":"decrement","accounts":[{"name":"myAccount","isMut":true,"isSigner":false}],"args":[]}],"accounts":[{"name":"MyAccount","type":{"kind":"struct","fields":[{"name":"data","type":"u64"}]}}],"metadata":{"address":"HEZSGK5gWyBHvbZ187VS13a3YeQm7NVMiYLeKCMD4ZJS"}}');function v(e,t,n,r,a,o,c){try{var s=e[o](c),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){v(o,r,a,c,s,"next",e)}function s(e){v(o,r,a,c,s,"throw",e)}c(void 0)}))}}var h=u.rV.Keypair,w=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t=function(){if(!S)return null;var e=new i.Connection("https://api.testnet.solana.com","processed");return new u.Y7(e,S,{preflightCommitment:"processed"})},n=(0,c.useState)(null),r=n[0],d=n[1],p=(0,c.useState)(null),f=p[0],m=p[1],x=(0,c.useState)(null),v=x[0],w=x[1],S=(0,s.z)();function k(){return(k=y(a().mark((function e(){var n,r,o,c,s,i,l,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t(),r=h.generate(),n){e.next=4;break}throw"Provider is null";case 4:return o=JSON.stringify(b),c=JSON.parse(o),s=new u.$r(c,b.metadata.address,n),e.prev=7,e.next=10,s.rpc.initialize({accounts:{myAccount:r.publicKey,user:n.wallet.publicKey,systemProgram:u.rV.SystemProgram.programId},signers:[r]});case 10:return i=e.sent,console.log("Transaction",i),e.next=14,n.connection.confirmTransaction(i,"confirmed");case 14:return l=e.sent,console.log("Transaction confirmed:",l),e.next=18,s.account.myAccount.fetch(r.publicKey);case 18:p=e.sent,console.log("Account",p.data.toString()),m(p.data.toString()),g({type:"success",message:"Counter initialized!",txid:i}),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(7),console.log(e.t0),g({type:"error",message:"Counter failed to initialize!",description:null===e.t0||void 0===e.t0?void 0:e.t0.message,txid:""});case 28:d(r);case 29:case"end":return e.stop()}}),e,null,[[7,24]])})))).apply(this,arguments)}function j(){return(j=y(a().mark((function e(){var n,o,c,s,i,l,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t(),o=r,n){e.next=4;break}throw"Provider is null";case 4:return c=JSON.stringify(b),s=JSON.parse(c),i=new u.$r(s,b.metadata.address,n),e.prev=7,e.next=10,i.rpc.increment({accounts:{myAccount:o.publicKey}});case 10:return l=e.sent,console.log("Transaction",l),e.next=14,n.connection.confirmTransaction(l,"confirmed");case 14:return e.sent,e.next=17,i.account.myAccount.fetch(o.publicKey);case 17:p=e.sent,m(p.data.toString()),g({type:"success",message:"Counter incremented!",txid:l}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(7),console.log(e.t0),g({type:"error",message:"Counter failed to increment!",description:null===e.t0||void 0===e.t0?void 0:e.t0.message,txid:""});case 26:d(o);case 27:case"end":return e.stop()}}),e,null,[[7,22]])})))).apply(this,arguments)}function N(){return(N=y(a().mark((function e(){var n,o,c,s,i,l,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t(),o=r,n){e.next=4;break}throw"Provider is null";case 4:return c=JSON.stringify(b),s=JSON.parse(c),i=new u.$r(s,b.metadata.address,n),e.prev=7,e.next=10,i.rpc.decrement({accounts:{myAccount:o.publicKey}});case 10:return l=e.sent,e.next=13,n.connection.confirmTransaction(l,"confirmed");case 13:return e.sent,e.next=16,i.account.myAccount.fetch(o.publicKey);case 16:p=e.sent,m(p.data.toString()),g({type:"success",message:"Counter decremented!",txid:l}),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(7),console.log(e.t0),g({type:"error",message:"Counter failed to decrement!",description:null===e.t0||void 0===e.t0?void 0:e.t0.message,txid:""});case 25:d(o);case 26:case"end":return e.stop()}}),e,null,[[7,21]])})))).apply(this,arguments)}function O(){return(O=y(a().mark((function e(){var n,o,c,s,i,l,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t(),o=r,n){e.next=4;break}throw"Provider is null";case 4:return c=JSON.stringify(b),s=JSON.parse(c),i=new u.$r(s,b.metadata.address,n),e.prev=7,e.next=10,i.rpc.update(new u.BN(v),{accounts:{myAccount:o.publicKey}});case 10:return l=e.sent,e.next=13,n.connection.confirmTransaction(l,"confirmed");case 13:return e.sent,e.next=16,i.account.myAccount.fetch(o.publicKey);case 16:p=e.sent,m(p.data.toString()),g({type:"success",message:"Counter updated!",txid:l}),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(7),console.log(e.t0),g({type:"error",message:"Counter failed to update!",description:null===e.t0||void 0===e.t0?void 0:e.t0.message,txid:""});case 25:d(o);case 26:case"end":return e.stop()}}),e,null,[[7,21]])})))).apply(this,arguments)}return(0,o.jsx)("div",{className:"md:hero mx-auto p-4",children:(0,o.jsxs)("div",{className:"md:hero-content flex flex-col",children:[(0,o.jsxs)("h1",{className:"text-center text-5xl md:pl-12 font-bold text-transparent bg-clip-text bg-gradient-to-tr from-[#9945FF] to-[#14F195]",children:["Counter ",(0,o.jsxs)("span",{className:"text-sm font-normal align-top text-slate-700",children:["v",l]})]}),(0,o.jsxs)("h4",{className:"md:w-full text-center text-slate-300 my-2",children:[(0,o.jsx)("p",{children:"Simple app to test out Solana"}),"Make sure you are on Test Network"]}),(0,o.jsx)("h1",{className:"text-center text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-tr from-[#9945FF] to-[#14F195]",children:f||null}),r?(0,o.jsxs)("div",{className:"flex flex-wrap gap-4 ",children:[(0,o.jsxs)("div",{className:"w-full gap-4 flex",children:[(0,o.jsx)("button",{onClick:function(){return j.apply(this,arguments)},className:"w-1/2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"+"}),(0,o.jsx)("button",{onClick:function(){return N.apply(this,arguments)},className:"w-1/2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"-"})]}),(0,o.jsxs)("div",{className:"flex flex-wrap pt-4 w-full border-t",children:[(0,o.jsx)("input",{value:v,onChange:function(e){w(e.target.value)},placeholder:"Enter number for counter",type:"number",className:"border-t border-gray-100 mb-4 w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600"}),(0,o.jsx)("button",{onClick:function(){return O.apply(this,arguments)},className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",disabled:!v,children:"Update"})]})]}):(0,o.jsx)("button",{onClick:function(){return k.apply(this,arguments)},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Start"})]})})},S=n(4718),k=n(4306);function j(e,t,n,r,a,o,c){try{var s=e[o](c),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(r,a)}var N=(0,n(4671).Z)((function(e,t){return{balance:0,getUserSOLBalance:function(){var t,n=(t=a().mark((function t(n,r){var o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=0,t.prev=1,t.next=4,r.getBalance(n,"confirmed");case 4:o=t.sent,o/=i.LAMPORTS_PER_SOL,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("error getting balance: ",t.t0);case 11:e((function(e){e.balance=o,console.log("balance updated, ",o)}));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function c(e){j(o,r,a,c,s,"next",e)}function s(e){j(o,r,a,c,s,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}()}}));function O(e,t,n,r,a,o,c){try{var s=e[o](c),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(r,a)}var A=function(){var e,t=(0,S.R)().connection,n=(0,k.O)().publicKey,r=N().getUserSOLBalance,s=(0,c.useCallback)((e=a().mark((function e(){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return console.log("error","Wallet not connected!"),g({type:"error",message:"error",description:"Wallet not connected!"}),e.abrupt("return");case 4:return o="",e.prev=5,e.next=8,t.requestAirdrop(n,1*i.LAMPORTS_PER_SOL);case 8:return o=e.sent,e.next=11,t.confirmTransaction(o,"confirmed");case 11:g({type:"success",message:"Airdrop successful!",txid:o}),r(n,t),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),g({type:"error",message:"Airdrop failed!",description:null===e.t0||void 0===e.t0?void 0:e.t0.message,txid:o}),console.log("error","Airdrop failed! ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message),o);case 19:case"end":return e.stop()}}),e,null,[[5,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){O(o,r,a,c,s,"next",e)}function s(e){O(o,r,a,c,s,"throw",e)}c(void 0)}))}),[n,t,r]);return(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"px-8 m-2 btn animate-pulse bg-gradient-to-r from-[#9945FF] to-[#14F195] hover:from-pink-500 hover:to-yellow-500 ...",onClick:s,children:(0,o.jsx)("span",{children:"Airdrop 1 "})})})};function P(e,t,n,r,a,o,c){try{var s=e[o](c),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(r,a)}var C=function(){var e,t=(0,S.R)().connection,n=(0,k.O)(),r=n.publicKey,s=n.sendTransaction,u=(0,c.useCallback)((e=a().mark((function e(){var n,o,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return g({type:"error",message:"Wallet not connected!"}),console.log("error","Send Transaction: Wallet not connected!"),e.abrupt("return");case 4:return n="",e.prev=5,o=i.Keypair.generate().publicKey,c=1e6,console.log(c),u=(new i.Transaction).add(i.SystemProgram.transfer({fromPubkey:r,toPubkey:o,lamports:c})),e.next=12,s(u,t);case 12:return n=e.sent,e.next=15,t.confirmTransaction(n,"confirmed");case 15:g({type:"success",message:"Transaction successful!",txid:n}),e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(5),g({type:"error",message:"Transaction failed!",description:null===e.t0||void 0===e.t0?void 0:e.t0.message,txid:n}),console.log("error","Transaction failed! ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message),n),e.abrupt("return");case 23:case"end":return e.stop()}}),e,null,[[5,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){P(o,r,a,c,s,"next",e)}function s(e){P(o,r,a,c,s,"throw",e)}c(void 0)}))}),[r,g,t,s]);return(0,o.jsx)("div",{children:(0,o.jsxs)("button",{className:"group w-60 m-2 btn animate-pulse disabled:animate-none bg-gradient-to-r from-[#9945FF] to-[#14F195] hover:from-pink-500 hover:to-yellow-500 ... ",onClick:u,disabled:!r,children:[(0,o.jsx)("div",{className:"hidden group-disabled:block ",children:"Wallet not connected"}),(0,o.jsx)("span",{className:"block group-disabled:hidden",children:"Send Transaction"})]})})};var K=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t=(0,k.O)(),n=(0,S.R)().connection,r=N((function(e){return e.balance})),a=N().getUserSOLBalance;return(0,c.useEffect)((function(){t.publicKey&&(console.log(t.publicKey.toBase58()),a(t.publicKey,n))}),[t.publicKey,n,a]),(0,o.jsx)("div",{className:"md:hero mx-auto p-4",children:(0,o.jsxs)("div",{className:"md:hero-content flex flex-col",children:[(0,o.jsx)("h1",{className:"text-center text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-tr from-[#9945FF] to-[#14F195]",children:"Wallet"}),(0,o.jsxs)("div",{className:"text-center",children:[t.publicKey&&(0,o.jsxs)("p",{children:["Public Key: ",t.publicKey.toBase58()]}),t&&(0,o.jsxs)("p",{children:["SOL Balance: ",(r||0).toLocaleString()]}),(0,o.jsx)(A,{}),(0,o.jsx)(C,{})]})]})})}}}]);